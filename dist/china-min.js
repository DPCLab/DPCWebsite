function getTimeDelta(e){return then=new Date(e),now=new Date,minutes=Math.round((now.getTime()-then.getTime())/6e4),(minutes<60?minutes+" minutes":Math.round(minutes/60)+" hours")+" ago"}var rangeI,currentI=0;function displayPosts(e,t){rangeI=e.length/10;for(var n=0;n<rangeI;n++)d3.select("#posts").append("div").attr("id","container-"+n).style("display",0==n?"block":"none").selectAll("li").data(e.slice(10*n,Math.min(10*n+10,e.length))).enter().append("li").html(function(e){return"<img class = 'profile-photo' src = '../../assets/graphics/profile-photo.png'><h2>"+(""+e.uid).substring(0,5)+"*****</h2><br><p class = 'text'>"+e.text+"</p><br><span>LAST SEEN:</span> "+getTimeDelta(e.retrieved)+" ("+e.retrieved+")<br>"})}function displayTrends(e){d3.select("#trends").selectAll("li").data(e).enter().append("li").html(function(e){return e.term+"<span>("+e.meaning+")</span>"})}var postsUpdated=!1;function updatePosts(){$("#loading").show(),$.get("https://cs.dpccdn.net/v1/censored_posts",function(e){d3.select("#posts").selectAll("*").remove(),displayPosts(e.posts,e.lastUpdated),displayTrends(e.trends.slice(0,10)),$("#loading").hide(),$("#sidebar").css("display","block"),$("#post-column").css("display","block"),postsUpdated=!0})}$(document).ready(function(){updatePosts()});var loading=!1;$(window).scroll(function(){postsUpdated&&!loading&&$(window).scrollTop()>=$(document).height()-$(window).height()&&(loading=!0,currentI<rangeI?$("#container-"+ ++currentI).css("display","block"):$("#end-message").show(),loading=!1)});