function formatPercent(e){return(100*e).toFixed(2)+"%"}function drawPie(e,t,l){var a,n,o=["Visible","Potentially Censored"],r=["#6c5ce7","#ffffff"],d=0,s=e.map(function(e,t){return d+=parseInt(e),{label:o[t],value:parseInt(e),color:r[t]}}),c=d3.pie().value(function(e){return e.value}).sort(null),i=d3.arc().outerRadius(80).innerRadius(40),f=d3.select("#"+t).select(".tooltip");d3.select("#"+t).style("width",160);d3.select("#"+t).append("svg").attr("width",160).attr("height",160).append("g").attr("transform","translate(80,80)").selectAll("path").data(c(s)).enter().append("path").attr("fill",function(e,t){return e.data.color}).attr("stroke","#ffffff00").attr("d",i).on("mouseover",function(e,t){a="<h3>"+e.data.label+"</h3><p>"+e.value+" posts ("+formatPercent(e.value/d)+")</p>",f.classed("hidden",!1).html(a)}).on("mousemove",function(e){n=d3.mouse(d3.select("#"+t).node()),f.style("left",n[0]-Math.round(f.node().offsetWidth/2)+"px").style("top",n[1]-Math.round(f.node().offsetHeight)-12+"px"),d3.select("#"+t).style("fill",d3.rgb(d3.color(e.data.color).brighter(.5)))}).on("mouseout",function(e){f.classed("hidden",!0),d3.select("#"+t).style("fill",e.color)});var u=d3.select("#"+t).append("div").attr("class","pie-label").style("width","160px");l&&u.append("h3").html(l),u.selectAll("span").data(s).enter().append("span").html(function(e,t){return"<div class = 'bubble' style = 'background:"+e.color+"'></div>"+e.label}).append("br")}